# This file is not used by cookiecutter directly
# and has to be converted to cookiecutter.json

demo_name: ansible_cvp_demo
ansible_user: cvpadmin
ansible_password: arista123
# template to be updated with filter plugin to avoid encrypting password or use vault
ansible_host: 192.168.122.122
mgmt_settings:
  oob_gateway: 192.168.122.1
  subnet_mask_length: 24
  name_server_list:
    - 192.168.178.1
    - 8.8.8.8
  ntp_server_list:
    - time.google.com
    - 0.fr.pool.ntp.org
    - 1.fr.pool.ntp.org
cvp:
  ingest_key: arista123
  container_root: AVD_DEMO
  configlets_prefix: ADV-
inventory:
  dc_list:
    - dc_name: AVD_DEMO_DC
      # Point to Point Network Summary range, assigned as /31 for each uplink interface
      # Assign range larger then total [spines * total potential leafs * 2]
      underlay_p2p_network_summary: 172.31.255.0/24
      # IP address range for evpn loopback for all switches in fabric, assigned as /32s
      # Assign range larger then total spines + total leafs switches
      overlay_loopback_network_summary: 192.168.255.0/24
      # VTEP VXLAN Tunnel source loopback IP for leaf switches, assigned in /32s
      # Assign range larger then total leaf switches
      vtep_loopback_network_summary: 192.168.254.0/24
      # mlag pair IP assignment - assign blocks - Assign range larger then
      # total spines + total leafs switches
      mlag_ips:
        leaf_peer_l3: 10.255.251.0/24
        mlag_peer: 10.255.252.0/24
      # Enable vlan aware bundles
      vxlan_vlan_aware_bundles: false
      # bgp peer groups passwords
      bgp_peer_groups:
        IPv4_UNDERLAY_PEERS:
          password: "AQQvKeimxJu+uGQ/yYvv9w=="
        EVPN_OVERLAY_PEERS:
          password: "q+VNViP5i4rVjW1cxFv2wA=="
        MLAG_IPv4_UNDERLAY_PEER:
          password: "vnEaG8gMeQf3d3cN6PktXQ=="
      # spine switch spine switch parameters
      spine:
        platform: vEOS-LAB
        bgp_as: 65001
        leaf_as_range: 65101-65132
      l3leaf:
        defaults:
          # virtual router mac for VNIs assigned to Leaf switches
          # format: xx:xx:xx:xx:xx:xx
          virtual_router_mac_address: 00:1c:73:00:dc:01
          platform: vEOS-LAB
          bgp_as: 65100
          spines: [SPINE1, SPINE2]
          uplink_to_spine_interfaces: [Ethernet1, Ethernet2]
          mlag_interfaces: [Ethernet3, Ethernet4]
          spanning_tree_priority: 4096
          spanning_tree_mode: mstp
      
      group_list:
        - group_name: SPINES
          host_list:
            - hostname: SPINE1
              ansible_host: 192.168.122.11
            - hostname: SPINE2
              ansible_host: 192.168.122.12
        - group_name: LEAFS
          subgroup_list:  # usually corresponds to MLAG
            - subgroup_name: MLAG1
              bgp_as: 65001
              host_list:
                - hostname: LEAF1A
                  ansible_host: 192.168.122.21
                  spine_interfaces: [Ethernet1, Ethernet1]
                - hostname: LEAF1B
                  ansible_host: 192.168.122.22
                  spine_interfaces: [Ethernet2, Ethernet2]
            - subgroup_name: MLAG2
              bgp_as: 65002
              host_list:
                - hostname: LEAF2A
                  ansible_host: 192.168.122.23
                  spine_interfaces: [Ethernet3, Ethernet3]
                - hostname: LEAF2B
                  ansible_host: 192.168.122.24
                  spine_interfaces: [Ethernet4, Ethernet4]

      tenants:
        # Tenant A Specific Information - VRFs / VLANs
        Tenant_A:
          mac_vrf_vni_base: 10000
          vrfs:
            Tenant_A_OP_Zone:
              vrf_vni: 10
              vtep_diagnostic:
                loopback: 100
                loopback_ip_range: 10.255.1.0/24
              svis:
                110:
                  name: Tenant_A_OP_Zone_1
                  tags: [opzone]
                  enabled: true
                  ip_subnet: 10.1.10.0/24

      port_profiles:
        TENANT_A:
          mode: access
          vlans: "110"
        TENANT_B:
          mode: trunk
          vlans: "210-211"

      servers:
        server01:
          rack: RackA
          adapters:
            - type: nic
              server_ports: [Eth1, Eth2]
              switch_ports: [Ethernet5, Ethernet5]
              switches: [LEAF1A, LEAF1B]
              profile: TENANT_A
              port_channel:
                state: present
                description: PortChanne1
                mode: active
        server02:
          rack: RackB
          adapters:
            - type: nic
              server_ports: [Eth1, Eth2]
              switch_ports: [Ethernet5, Ethernet5]
              switches: [LEAF2A, LEAF2B]
              profile: TENANT_A
              port_channel:
                state: present
                description: PortChanne1
                mode: active


      #### Override for vEOS Lab Caveats ####

      # Disable update wait-for-convergence and update wait-for-install,
      # which is not supported in vEOS-LAB.
      # Refer to design guide

      spine_bgp_defaults:
        #  - update wait-for-convergence
        #  - update wait-install
        - no bgp default ipv4-unicast
        - distance bgp 20 200 200
        - graceful-restart restart-time 300
        - graceful-restart

      leaf_bgp_defaults:
        #  - update wait-install
        - no bgp default ipv4-unicast
        - distance bgp 20 200 200
        - graceful-restart restart-time 300
        - graceful-restart

      # Update p2p mtu 9000 -> 1500
      p2p_uplinks_mtu: 1500

      # Adjust default bfd values
      bfd_multihop:
        interval: 1200
        min_rx: 1200
        multiplier: 3
